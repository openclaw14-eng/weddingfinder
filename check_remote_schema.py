import json
import urllib.request
import uuid

url = 'https://gqlprwursgbgkfkwzkyb.supabase.co/rest/v1/vendors'
api_key = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdxbHByd3Vyc2diZ2tma3d6a3liIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MDc1NzEzNSwiZXhwIjoyMDg2MzMzMTM1fQ.Nv1_gzB0Q5PrdiBO9Bn1CwQCLXh5BsivrG22HbN6wqU'

headers = {
    'apikey': api_key,
    'Authorization': f'Bearer {api_key}',
    'Content-Type': 'application/json'
}

def check_schema():
    print("Checking database record to match schema...")
    # Fetch 1 record to see keys
    req = urllib.request.Request(url + '?limit=1', headers=headers, method='GET')
    with urllib.request.urlopen(req) as response:
        data = json.load(response)
        print(f"Sample schema: {data}")

if __name__ == "__main__":
    check_schema()
